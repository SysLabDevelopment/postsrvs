{"version":3,"sources":["webpack:///src/app/pages/draw/draw.module.ts","webpack:///src/app/pages/draw/draw.page.ts","webpack:///src/app/pages/draw/draw.page.html"],"names":["routes","path","component","DrawPageModule","forChild","imports","declarations","DrawPage","platform","router","renderer","location","isClear","error_mes","currentColour","brushSize","save_process","canvasElement","canvas","nativeElement","__ngRendererSetElementAttributeHelper","width","height","ev","lastX","touches","pageX","lastY","pageY","ctx","getContext","clearRect","currentX","currentY","beginPath","lineJoin","moveTo","lineTo","closePath","strokeStyle","lineWidth","stroke","console","log","code","toDataURL","split","localStorage","setItem","back","handleStart","handleMove","saveImage","clearCanvas","selector","templateUrl","styleUrls","__ngRendererSplitNamespaceHelper","name","match","element","namespaceAndName","value","namespace","setAttribute","removeAttribute"],"mappings":"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","file":"pages-draw-draw-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DrawPage } from './draw.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DrawPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DrawPage]\n})\nexport class DrawPageModule {}\n","import { Component, OnInit, ViewChild, Renderer2 } from '@angular/core';\nimport { Platform } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { Location } from '@angular/common';\n@Component({\n  selector: 'app-draw',\n  templateUrl: './draw.page.html',\n  styleUrls: ['./draw.page.scss'],\n})\nexport class DrawPage implements OnInit {\n  ngOnInit() { }\n\n  @ViewChild('myCanvas', { static: true }) canvas: any;\n\n  canvasElement: any;\n  lastX: number;\n  lastY: number;\n  isClear: boolean = true;\n  error_mes: boolean = false;\n  currentColour: string = '#000000';\n  brushSize: number = 10;\n\n  public save_process: boolean = false;\n  constructor(private platform: Platform, public router: Router, public renderer: Renderer2, private location: Location) {\n\n  }\n  ngAfterViewInit() {\n\n    this.canvasElement = this.canvas.nativeElement;\n\n    __ngRendererSetElementAttributeHelper(this.renderer, this.canvasElement, 'width', this.platform.width() + '');\n    __ngRendererSetElementAttributeHelper(this.renderer, this.canvasElement, 'height', this.platform.height() + '');\n\n  }\n\n  handleStart(ev) {\n\n    this.lastX = ev.touches[0].pageX;\n    this.lastY = ev.touches[0].pageY;\n  }\n\n  clearCanvas() {\n    this.isClear = true;\n    let ctx = this.canvasElement.getContext('2d');\n    ctx.clearRect(0, 0, this.canvasElement.width, this.canvasElement.height);\n\n  }\n\n  handleMove(ev) {\n    this.isClear = false;\n    this.error_mes = false;\n    let ctx = this.canvasElement.getContext('2d');\n    let currentX = ev.touches[0].pageX;\n    let currentY = ev.touches[0].pageY;\n\n    ctx.beginPath();\n    ctx.lineJoin = \"round\";\n    ctx.moveTo(this.lastX, this.lastY);\n    ctx.lineTo(currentX, currentY);\n    ctx.closePath();\n    ctx.strokeStyle = this.currentColour;\n    ctx.lineWidth = this.brushSize;\n    ctx.stroke();\n\n    this.lastX = currentX;\n    this.lastY = currentY;\n\n  }\n\n  public saveImage() {\n    if (this.isClear) {\n      this.error_mes = true;\n      return false;\n    }\n    console.log('save_image_call');\n    var code = this.canvasElement.toDataURL();\n    code = code.split(',')[1];\n    localStorage.setItem('drawImg', code);\n    this.back();\n  }\n\n  public back() {\n    this.location.back();\n  }\n\n}\n\ntype AnyDuringRendererMigration = any;\n\nfunction __ngRendererSplitNamespaceHelper(name: AnyDuringRendererMigration) {\n  if (name[0] === \":\") {\n    const match = name.match(/^:([^:]+):(.+)$/);\n    return [match[1], match[2]];\n  }\n  return [\"\", name];\n}\n\nfunction __ngRendererSetElementAttributeHelper(renderer: AnyDuringRendererMigration, element: AnyDuringRendererMigration, namespaceAndName: AnyDuringRendererMigration, value?: AnyDuringRendererMigration) {\n  const [namespace, name] = __ngRendererSplitNamespaceHelper(namespaceAndName);\n  if (value != null) {\n    renderer.setAttribute(element, name, value, namespace);\n  }\n  else {\n    renderer.removeAttribute(element, name, namespace);\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-title>Подпись</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <canvas #myCanvas (touchstart)=\"handleStart($event)\" (touchmove)=\"handleMove($event)\"></canvas>\n  <div class=\"error\" *ngIf=\"error_mes\">Необходимо оставить подпись</div>\n  <div class=\"btns\">\n    <button class=\"save-btn\" (click)=\"saveImage()\">Отправить</button>\n    <button class=\"save-btn clear-btn\" (click)=\"clearCanvas()\">Очистить</button>\n    <button class=\"save-btn back\" (click)=\"back()\">Назад</button>\n  </div>\n\n</ion-content>\n"]}