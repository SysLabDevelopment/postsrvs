{"version":3,"sources":["webpack:///src/app/pages/order/order.module.ts","webpack:///src/app/pages/order/order.page.ts","webpack:///src/app/pages/order/order.page.html"],"names":["routes","path","component","OrderPageModule","forChild","imports","declarations","OrderPage","router","route","courier","state$","auth","http","iab","CL","sys","settings","sysMap","data","storage","cache","network","orderService","bs","device","orderId","clientId","status_id","status","goods","address","order","name","timeFrom","timeTo","phone","pageInit","statuses","id","reasons","reason","commentText","g_quants","changeWindow","selectedPayment","client_status","client_status_dt","client_status_id","order_sum","vlog","poruch","mass","amount","email_input","phone_input","barcode_flag","barcode_url","barcode","selectedReason","selectedStatus","hide_status","$codeStop","showPhone","podrazd","email_error","pay_access","pay_access_data","show_info","show_email","callWindow","drawimage","drawNeedle","imageToShow","orderPhones","today","Date","tomorrow","openCompany","snapshot","paramMap","get","initOrder","img","localStorage","getItem","initStatuses","setDate","getDate","note","url","JSON","stringify","post","need","navigate","removeItem","phones","replace","length","normalizePhoneNumber","push","slice","action","parsePhone","courierPhone","courier_phone","selectedPhone","callNumber","then","type","phoneClick","client_number","cur_number","sendPost","subscribe","resp","console","log","showError","orders","filter","toString","client_address","datetime_from","datetime_to","client_phone","status_text","Number","client_id","Podrazd","coords","lt","lg","setQuants","ifPaid","getBalnce","getPayData","initClientInfo","states","client_states","getValue","state_id","client_state","i","state","good","code","Code","count","final_kol_vo","kol_vo","quant","price","Price","q","n_q","getSum","getOrders","getStatus","newStatus","syncRequests","quants","new_plan_date","check","checkBase64Image","saveItem","localModifyOrders","sendDelayedCall","self","map","set","next","noSkip","changeStatus","undefined","toLocaleDateString","success","updateWayInfo","doOCR","recognizedData","text","presentToast","rur","item","callback_url","proxy","products","good_name","good_amount","good_price","Math","round","pos","quantity","purchase","api_key","login","cashier","order_data","apikey","String","cashier_name","mode","customer_email","customer_phone","send_api_data","navigator","onLine","res","api_data","forEach","product","orderData","submitChange","checkPayment","requests","req","browser","create","r_url","interval_1ss","pipe","mail_exp","infoStr","mail","exec","intentStart","showRoute","drawedImg","drawImg","drawBtn","checkPhoto","imageData","sendPayCall","setItem","infoUpdated","scan","data1","uuid","changeQuant","height","selector","animations","templateUrl","styleUrls"],"mappings":"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","file":"pages-order-order-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { OrderPage } from './order.page';\nimport {IconsModule} from '../../icons/icons.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OrderPage\n  }\n];\n\n@NgModule({\n  imports: [\n    IconsModule,\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [OrderPage]\n})\nexport class OrderPageModule { }\n","import {\n  animate, state,\n  style,\n\n  transition, trigger\n} from \"@angular/animations\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { Component, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner/ngx';\nimport { CallNumber } from \"@ionic-native/call-number/ngx\";\nimport { Device } from '@ionic-native/device/ngx';\nimport { InAppBrowser } from \"@ionic-native/in-app-browser/ngx\";\nimport { Network } from '@ionic-native/network/ngx';\nimport { Storage } from \"@ionic/storage\";\nimport { CacheService } from \"ionic-cache\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { Order } from 'src/app/interfaces/order';\nimport { Reason } from \"../../interfaces/reason\";\nimport { Statuses } from \"../../interfaces/statuses\";\nimport { AuthService } from \"../../services/auth.service\";\nimport { CourierService } from \"../../services/courier.service\";\nimport { SettingsService } from \"../../services/settings.service\";\nimport { StateService } from \"../../services/state.service\";\nimport { SysService } from \"../../services/sys.service\";\nimport { MapService } from \"../../services/sys/map.service\";\nimport { OrderService } from '../../services/sys/order.service';\nimport { DataService } from './../../services/sys/data.service';\n@Component({\n  selector: \"app-order\",\n  animations: [\n    trigger('openClose', [\n      // ...\n      state('open', style({\n        height: '264px',\n      })),\n      state('closed', style({\n        height: '70px',\n      })),\n      transition('open => closed', [\n        animate('0.5s')\n      ]),\n      transition('closed => open', [\n        animate('0.5s')\n      ]),\n    ])],\n  templateUrl: \"./order.page.html\",\n  styleUrls: [\"./order.page.scss\"],\n})\nexport class OrderPage implements OnInit {\n  public orderId: string = null;\n  public clientId: string = null;\n  public status_id: number = null;\n  public status: string = null;\n  public goods: any = null;\n  public address: any = null;\n  public order: any = null;\n  public name: string = null;\n  public timeFrom: string = null;\n  public timeTo: string = null;\n  public phone: string = null;\n  public pageInit: boolean = true;\n  public statuses: Statuses[] = [\n    { id: 4, status: \"Не доставлено\" },\n    { id: 5, status: \"Доставлено\" },\n    { id: 6, status: \"Частично доставлено\" },\n  ];\n  public reasons: Reason[] = [\n    { id: 1, reason: \"Не удалось Дозвониться!\" },\n    { id: 2, reason: \"Отказ, при созвоне с клиентом\" },\n    { id: 3, reason: \"Отказ от доставки без объяснения причины\" },\n    { id: 4, reason: \"Ошибка оформления ИМ\" },\n    { id: 5, reason: \"Получатель передумал\" },\n    { id: 6, reason: \"Товар не подошел/не понравился\" },\n    { id: 7, reason: \"Финансовые трудности у получателя\" },\n    { id: 8, reason: \"Перенос даты доставки получателем.\" },\n    { id: 10, reason: \"Не успел\" },\n    { id: 11, reason: \"Переехали/нев.Адрес\" },\n  ];\n  public commentText: any = null;\n  public g_quants: any = {};\n  public changeWindow: boolean = false;\n  public selectedPayment = \"1\";\n  public client_status = \"\";\n  public client_status_dt = \"\";\n  public client_status_id = \"\";\n  public order_sum = null;\n  public vlog = null;\n  public poruch = null;\n  public mass = null;\n  public amount = null;\n  public email_input = \"\";\n  public phone_input = \"\";\n  public barcode_flag = false;\n  public barcode_url = null;\n  public barcode = null;\n  public selectedReason: any = null;\n  public selectedStatus: any = null;\n  public hide_status = false;\n  public $codeStop: Subject<any> = new Subject();\n  public showPhone: boolean = false;\n  public podrazd = null;\n  public email_error = false;\n  public pay_access: boolean = false;\n  public pay_access_data = null;\n  public show_info: boolean = false;\n  public show_email: boolean = false;\n  public callWindow: boolean = false;\n  public drawimage: boolean = false;\n  public drawNeedle: boolean = true;\n  public imageToShow = null;\n  coords: Array<any>;\n  public orderPhones: Array<string> = [];\n  public selectedPhone: string;\n  public note: string;\n  public today = new Date();\n  public tomorrow = new Date();\n  public new_plan_date: string; //Дата переноса заказа\n  public openCompany = false;\n  public checkBase64Image: string;\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private courier: CourierService,\n    private state$: StateService,\n    private auth: AuthService,\n    private http: HttpClient,\n    private iab: InAppBrowser,\n    private CL: CallNumber,\n    public sys: SysService,\n    public settings: SettingsService,\n    private sysMap: MapService,\n    private data: DataService,\n    private storage: Storage,\n    private cache: CacheService,\n    private network: Network,\n    private orderService: OrderService,\n    private bs: BarcodeScanner,\n    private device: Device,\n\n\n  ) {\n    this.orderId = this.route.snapshot.paramMap.get(\"id\");\n\n    this.initOrder();\n    var img = localStorage.getItem(\"drawImg\");\n    if (img) {\n      this.imageToShow = \"data:image/jpg;base64,\" + img;\n    }\n  }\n\n  ngOnInit() {\n    this.courier.initStatuses();\n    this.tomorrow.setDate(this.tomorrow.getDate() + 1);\n    this.note = localStorage.getItem(this.orderId);\n  }\n\n  ngAfterViewChecked() {\n    var img = localStorage.getItem(\"drawImg\");\n    if (img) {\n      this.imageToShow = \"data:image/jpg;base64,\" + img;\n    }\n  }\n\n  public sendPost(url, data) {\n    data = JSON.stringify(data);\n\n    return this.http.post(url, data);\n  }\n\n  public drawBtn(need) {\n    this.drawNeedle = need;\n    if (need) {\n      this.router.navigate([\"draw\"]);\n    } else {\n      localStorage.removeItem(\"drawImg\");\n    }\n  }\n\n  public parsePhone(phone): Array<string> {\n    let phones: Array<string> = [];\n    phone = phone.replace(/\\D+/g, \"\");\n\n    while (phone.length > 7) {\n      phone = this.normalizePhoneNumber(phone);\n      phones.push(phone.slice(\"\", 11));\n      phone = phone.slice(11);\n    }\n\n    return phones;\n  }\n\n  private normalizePhoneNumber(phone): string {\n    if (phone[0] !== \"8\" && phone[0] !== \"7\" && phone.length !== 11) {\n      phone = \"8\" + phone;\n    }\n    if (phone.length == 7 || phone.length == 10) {\n      phone = \"8\" + phone;\n    }\n    if (phone[0] !== \"8\" && phone.length == 11) {\n      phone = \"8\" + phone.slice(1);\n    }\n    return phone;\n  }\n\n  public phoneClick(action) {\n    this.orderPhones = this.parsePhone(this.phone);\n    let courierPhone = this.parsePhone(this.order.courier_phone)[0];\n\n    if (this.orderPhones.length == 1) {\n      this.selectedPhone = this.orderPhones[0];\n    }\n\n    switch (action) {\n      case \"init\":\n        this.callWindow = !this.callWindow;\n        break;\n      case \"phone\":\n        this.CL.callNumber(this.selectedPhone, false).then(() => { });\n        this.callWindow = false;\n        break;\n      case \"operator\":\n        if (this.network.type == 'none') {\n          this.phoneClick('phone');\n          return false;\n        }\n        if (this.selectedPhone && courierPhone) {\n          let url = \"orders\";\n          let data = {\n            action: \"send_phone\",\n            client_number: this.selectedPhone,\n            cur_number: courierPhone,\n          };\n          this.auth.sendPost(url, data).subscribe((resp) => {\n            console.log(\"call_subs\", resp);\n          });\n          this.auth.showError(9);\n          this.callWindow = false;\n        }\n        break;\n    }\n  }\n\n  public initOrder() {\n    this.storage.get('orders').then((orders: Array<Order>) => {\n      console.log('Список заказов из стоража', orders);\n    })\n    this.storage.get('orders').then((orders) => {\n      this.order = orders?.filter((order) => { return order.id.toString() == this.orderId })[0];\n      this.goods = this.order.goods;\n      this.address = this.order.client_address;\n      this.timeFrom = this.order.datetime_from;\n      this.timeTo = this.order.datetime_to;\n      this.phone = this.order.client_phone;\n      this.status = this.order.status_text;\n      this.status_id = Number(this.order.status_id);\n      this.clientId = this.order.client_id;\n      this.client_status = this.order.client_status;\n      this.client_status_dt = this.order.client_status_dt;\n      this.client_status_id = this.order.client_status_id;\n      this.vlog = this.order.vlog;\n      this.poruch = this.order.poruch;\n      (this.mass = this.order.mass), (this.amount = this.order.amount);\n      this.podrazd = this.order.Podrazd;\n      this.coords = [this.order.lt, this.order.lg];\n      this.setQuants();\n      this.ifPaid();\n      this.getBalnce();\n      this.getPayData();\n      this.initClientInfo();\n    });\n  }\n\n  public getClientState() {\n    var states = this.state$.client_states.getValue();\n    var state_id = this.order.client_state;\n\n    for (let i = 0; i < states.length; i++) {\n      if (states[i].id == state_id) {\n        return states[i].state;\n      }\n    }\n\n    return \"\";\n  }\n  //Заполняет массив с ценой товаров и их количеством(для частички)\n  public setQuants() {\n    var goods = this.order.goods;\n\n    for (var i = 0; i < goods.length; i++) {\n      let good = goods[i];\n      let code = good.Code;\n      let count = good.final_kol_vo ? good.final_kol_vo : good.kol_vo;\n      let quant = { amount: good.kol_vo, price: good.Price };\n      this.g_quants[code] = quant;\n    }\n  }\n\n  public changeQuant(code, action) {\n    var q: number = this.g_quants[code][\"amount\"];\n    var good = null;\n\n    for (var i = 0; i < this.order.goods.length; i++) {\n      if (this.order.goods[i].Code == code) {\n        good = this.order.goods[i];\n      }\n    }\n\n    if (action == \"plus\") {\n      var n_q = q + 1;\n\n      if (n_q > good.kol_vo) {\n        return false;\n      } else {\n        this.g_quants[code][\"amount\"] = n_q;\n      }\n    } else if (action == \"minus\") {\n      var n_q = q - 1;\n\n      if (n_q < 0) {\n        return false;\n      } else {\n        this.g_quants[code][\"amount\"] = n_q;\n      }\n    } else if (action == 'delete') {\n      this.g_quants[code][\"amount\"] = 0;\n    }\n    this.getSum();\n  }\n\n  public parseOrder(orders) {\n    if (this.state$.orders.getValue() == null) {\n      this.courier.getOrders();\n    }\n    for (var i = 0; i < orders.length; i++) {\n      if (orders[i].id == this.orderId) {\n        return orders[i];\n      }\n    }\n  }\n\n  public navBack() {\n    localStorage.removeItem(\"drawImg\");\n    this.router.navigate([\"/courier\"]);\n  }\n\n  public getStatus(): string {\n    return this.courier.getStatus(this.order);\n  }\n\n  public getBalnce() { }\n\n  public changeStatus() {\n    if (!this.changeWindow) {\n      this.changeWindow = true;\n    }\n  }\n\n  public close_window() {\n    this.changeWindow = false;\n  }\n\n  public selectStatus(id) {\n    this.selectedStatus = id;\n    if (id == 4 || id == 5) {\n      this.setQuants();\n      this.getSum();\n    }\n    if (id == 4) {\n      this.drawNeedle = false;\n    }\n  }\n\n  public selectReason(id) {\n    this.selectedReason = id;\n  }\n  public sendPayCall(order: Order = this.order, newStatus = this.selectedStatus as number) {\n    if (this.network.type == 'none') {\n      //Если оффлайн\n      this.cache.getItem('syncRequests').then((syncRequests: Array<any>) => {\n        order = { ...{ phone_input: this.phone_input }, ...{ email_input: this.email_input }, ...{ quants: this.g_quants }, ...order, ...{ selectedPayment: this.selectedPayment }, ...{ selectedReason: this.selectedReason }, ...{ new_plan_date: this.new_plan_date }, ...{ commentText: this.commentText }, ...{ check: this.checkBase64Image } };\n        syncRequests && syncRequests.push({ order, newStatus });\n        this.cache.saveItem('syncRequests', syncRequests, 'delayedCalls').then(() => {\n          console.log(`sys:: Отложено изменение статуса на ${newStatus} для заказа ${order.client_id}`);\n          this.localModifyOrders(newStatus);\n          this.router.navigate(['courier']);\n        })\n      })\n    } else {\n      //Если онлайн\n      this.localModifyOrders(newStatus);\n      order = { ...{ phone_input: this.phone_input }, ...{ email_input: this.email_input }, ...{ quants: this.g_quants }, ...order, ...{ selectedPayment: this.selectedPayment }, ...{ selectedReason: this.selectedReason }, ...{ new_plan_date: this.new_plan_date }, ...{ commentText: this.commentText }, ...{ check: this.checkBase64Image } };\n      this.orderService.sendDelayedCall(order, newStatus);\n      this.router.navigate(['courier']);\n    }\n  }\n\n  public submitChange() {\n    let self = this;\n    this.storage.get('orders').then((orders) => {\n      orders?.map((order) => {\n        if (order.id.toString() == this.order.id) {\n          order.status_id = this.selectedStatus;\n          this.storage.set('orders', orders);\n          this.data.orders.next(orders);\n        }\n      });\n    })\n    let noSkip = true;\n    switch (this.selectedStatus) {\n      case 4:\n        if (this.selectedReason != null) {\n          let new_plan_date = new Date(this.new_plan_date);\n\n          this.courier\n            .changeStatus(\n              this.selectedStatus,\n              this.order.id,\n              undefined,\n              this.selectedReason,\n              null,\n              null,\n              new_plan_date.toLocaleDateString()\n            )\n            .subscribe((data: any) => {\n              if (data.success == \"true\") {\n                self.changeWindow = false;\n                self.state$.state.next(\"init\");\n                self.selectedPayment = \"1\";\n                self.selectedReason = null;\n                self.selectedStatus = null;\n                self.router.navigate([\"courier\"]);\n                self.state$.updateWayInfo.next(\"0\");\n              }\n              localStorage.removeItem(\"drawImg\");\n            });\n        }\n        break;\n      case 5:\n        if (this.selectedPayment !== '2') {\n          noSkip = false\n        }\n        this.sys.doOCR(this.checkBase64Image, noSkip).then((recognizedData) => {\n          let text = this.commentText ? this.commentText : \"\";\n          this.courier\n            .changeStatus(\n              this.selectedStatus,\n              this.order.id,\n              text,\n              undefined,\n              undefined,\n              this.selectedPayment,\n              '',\n              this.checkBase64Image,\n              recognizedData\n            )\n            .subscribe((data: any) => {\n              if (data.success == \"true\") {\n                self.changeWindow = false;\n                self.state$.state.next(\"init\");\n                self.selectedPayment = \"1\";\n                self.selectedReason = null;\n                self.selectedStatus = null;\n                if (!self.pay_access) {\n                  self.router.navigate([\"courier\"]);\n                }\n                self.initOrder();\n                self.state$.updateWayInfo.next(\"0\");\n              }\n              localStorage.removeItem(\"drawImg\");\n            });\n        })\n        break;\n      case 6:\n\n        if (this.selectedPayment !== '2') {\n          noSkip = false\n        }\n        this.sys.doOCR(this.checkBase64Image, noSkip).then((recognizedData) => {\n          this.courier\n            .changeStatus(\n              this.selectedStatus,\n              this.order.id,\n              undefined,\n              undefined,\n              this.g_quants,\n              this.selectedPayment,\n              '',\n              this.checkBase64Image,\n              recognizedData\n            )\n            .subscribe((data: any | null) => {\n              if (data?.success == \"true\") {\n                self.changeWindow = false;\n                self.state$.state.next(\"init\");\n                self.selectedPayment = \"1\";\n                self.selectedReason = null;\n                self.selectedStatus = null;\n                if (!self.pay_access) {\n                  self.router.navigate([\"courier\"]);\n                }\n                self.initOrder();\n                self.state$.updateWayInfo.next(\"0\");\n              } else {\n                this.sys.presentToast(\n                  \"Нет товаров в заказе\",\n                  \"danger\",\n                  \"Частичная доставка невозможна\"\n                );\n              }\n              localStorage.removeItem(\"drawImg\");\n            });\n        })\n        break;\n    }\n  }\n\n  public getSum() {\n    if (this.order) {\n      let price: number = 0;\n      let quants = this.g_quants;\n      for (let code in quants) {\n        price += quants[code][\"price\"] * quants[code][\"amount\"];\n      }\n\n      this.order.rur = price;\n    }\n  }\n\n  //подсчитывает сумму заказа\n  public getPrice(order) {\n    if (order) {\n      let price: number = 0;\n      for (let i = 0; i < order.goods.length; i++) {\n        let good = order.goods[i];\n        price += Number(good.Price) * Number(good.kol_vo);\n      }\n      return price;\n    }\n  }\n\n  public selectPayment(item) {\n    this.selectedPayment = item;\n  }\n\n  public sendPay() {\n    let goods = this.order.goods;\n    let quants = this.g_quants;\n    let callback_url =\n      this.sys.proxy + \"https://mobile.postsrvs.ru/mobile/pay_callback.php\";\n    let products = [];\n\n    for (let code in quants) {\n      if (quants[code][\"amount\"] > 0) {\n        for (let i = 0; i < goods.length; i++) {\n          if (goods[i][\"Code\"] == code) {\n            let good_name = goods[i][\"Name\"];\n            let good_amount = quants[code][\"amount\"];\n            let good_price = Math.round(quants[code][\"price\"] * 100) / 100;\n            let pos = {\n              name: good_name,\n              price: good_price,\n              quantity: good_amount,\n            };\n            products.push(pos);\n          }\n        }\n      }\n    }\n\n    var purchase = { products: products };\n    console.log(\"goods_description\\n\", purchase);\n    var self = this;\n\n    if (this.pay_access) {\n      let api_key = this.pay_access_data[\"api_key\"];\n      let login = this.pay_access_data[\"login\"];\n      let cashier = this.pay_access_data[\"cashier_name\"];\n      let phone;\n\n      let order_data = {\n        apikey: String(this.pay_access_data.api_key),\n        login: String(this.pay_access_data.phone),\n        cashier_name:\n          String(this.pay_access_data.name) +\n          String(this.pay_access_data.phone),\n        purchase: purchase,\n        callback_url: callback_url,\n        mode: \"email\",\n        customer_email: this.email_input,\n        customer_phone: this.phone_input,\n      };\n      if (self.selectedPayment == \"2\") {\n        order_data[\"card_amount\"] = \"#\";\n      } else {\n        order_data[\"cash_amount\"] = \"#\";\n      }\n\n      if (this.phone_input != \"\") {\n        order_data[\"customer_phone\"] = this.phone_input;\n      }\n\n      self.send_api_data(order_data);\n    }\n  }\n\n  //Получаем api key & login\n  public getPayData() {\n\n    let url = \"pay_order\";\n    let data = { action: \"getData\", orderId: this.clientId };\n    let self = this;\n    if (navigator.onLine) {\n      this.auth.sendPost(url, data).subscribe((res: any) => {\n        console.log(\"GET_PAY_DATA\", res);\n        if (res.success == \"true\") {\n          self.pay_access = true;\n          self.pay_access_data = res;\n        } else {\n          self.pay_access = false;\n        }\n      });\n    } else {\n      self.pay_access = false;\n    }\n  }\n\n  public send_api_data(api_data) {\n    let url = \"pay_order\";\n    let self = this;\n    this.order.rur = 0;\n\n    api_data.purchase.products.forEach((product) => {\n      this.order.rur += product.price * product.quantity;\n    });\n\n    var data = {\n      action: \"sendPay\",\n      orderData: api_data,\n      orderId: this.order.id,\n    };\n    if (navigator.onLine) {\n      this.auth.sendPost(url, data).subscribe((res: any) => {\n        self.submitChange();\n        self.checkPayment();\n        self.hide_status = true;\n      });\n    } else {\n      let requests = [];\n      this.cache.getItem('requests').then((req) => {\n        if (req !== undefined) {\n          requests = req;\n        }\n        requests.push({ url: url, data: data });\n        this.cache.saveItem('requests', requests);\n\n        self.submitChange();\n        self.checkPayment();\n        self.hide_status = true;\n      })\n\n    }\n  }\n\n  public showCheck() {\n    const browser = this.iab.create(this.barcode_url, \"_blank\");\n  }\n\n  public voiceLink() {\n    const browser = this.iab.create(this.order.r_url);\n  }\n\n  public checkPayment() {\n    var self = this;\n    this.state$.interval_1ss.pipe(takeUntil(this.$codeStop)).subscribe(() => {\n      self.ifPaid();\n      console.log(\"paid_iter\");\n    });\n  }\n\n  public ifPaid() {\n    var url = \"pay_order\";\n    var data = { action: \"checkPaid\", orderId: this.order.id };\n    var self = this;\n\n    this.auth.sendPost(url, data).subscribe((data) => {\n      if (data.success == \"true\" && data.barcode != null) {\n        self.barcode_flag = true;\n        self.barcode_url = data.barcode_url;\n        self.barcode = data.barcode;\n        self.$codeStop.next();\n        self.hide_status = true;\n      }\n    });\n  }\n\n  public enterPhone() {\n    if (this.showPhone) {\n      this.showPhone = false;\n      this.show_email = false;\n    } else {\n      this.showPhone = true;\n      this.show_email = true;\n    }\n  }\n\n  public emailChange() {\n    if (this.email_error) {\n      this.email_error = false;\n    }\n  }\n\n  public initClientInfo() {\n    let mail_exp = /(?:([\\s.,]{1}))([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,6}/gm;\n    let infoStr = this.phone;\n    let mail = mail_exp.exec(infoStr);\n\n    if (mail != null) {\n      this.email_input = mail[0];\n    } else {\n      this.show_email = true;\n    }\n  }\n\n  public intentStart() {\n    this.state$.intentStart(this.coords);\n  }\n\n  onMap() {\n    this.sysMap.showRoute(this.order);\n\n  }\n\n  public doneOrder() {\n    let drawedImg = localStorage.drawImg;\n    if (this.drawNeedle && !drawedImg) {\n      this.drawBtn(this.drawNeedle);\n    } else {\n      if (this.selectedPayment == '2') {\n        this.sys.checkPhoto().then((imageData) => {\n          this.checkBase64Image = 'data:image/jpeg;base64,' + imageData;\n          this.sendPayCall();\n        });\n      } else {\n        this.sendPayCall();\n      }\n\n    }\n  }\n\n  public saveNote() {\n    localStorage.setItem(this.orderId, this.note);\n    this.sysMap.infoUpdated.next();\n  }\n\n  public tapBlock() {\n    this.openCompany = !this.openCompany;\n  }\n\n  public localModifyOrders(newStatus: number) {\n    this.storage.get('orders').then((orders) => {\n      orders?.map((order: Order) => {\n        if (order.id.toString() == this.order.id) {\n          order.status_id = newStatus;\n          this.storage.set('orders', orders);\n          this.data.orders.next(orders);\n        }\n      });\n    })\n  }\n\n  public scanReturned() {\n    this.bs.scan().then((data) => {\n      const url = this.sys.proxy + 'https://mobile.postsrvs.ru/mobile/orders';\n      let data1 = {\n        \"orderId\": this.orderId,\n        \"box_barcode\": data.text,\n        \"action\": \"get_box\",\n        \"uuid\": this.device.uuid\n      };\n      this.http.post(url, data1).subscribe(res => {\n        console.log(`sys:: ответ скана возврата: ${res}`);\n        this.changeQuant(res[0], 'delete')\n      })\n    })\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-title>{{clientId}}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <div class=\"o-wrp\" *ngIf=\"order\">\n    <div class=\"o-balance\">\n    </div>\n    <span class=\"shopTake\" *ngIf=\"order.SMACode\">\n      Забор &nbsp;\n    </span>\n    <div class=\"o-body\" *ngIf=\"pageInit\">\n      <div class=\"status-row o-row\" [ngClass]=\"{ st_process : status_id == 1,\n          st_done : status_id == 5 || status_id == 6 ,\n          st_fail : status_id == 4}\n            \">\n        <div class=\"sr-title o-t\">Статус:</div>\n        <div class=\"sr-status\">{{getStatus()}}</div>\n      </div>\n      <div class=\"adress-row o-row\">\n        <div class=\"ar-title o-t\">Адрес отправителя:</div>\n        <div class=\"ar-adress\">{{order.company_address}}</div>\n      </div>\n      <div class=\"adress-row o-row\">\n        <div class=\"ar-title o-t\">Адрес получателя:</div>\n        <div class=\"ar-adress\">{{address}}</div>\n      </div>\n      <div class=\"o-row poruch-row podrazd\" *ngIf=\"order.company\" [@openClose]=\"openCompany ? 'open' : 'closed'\"\n        (click)=\"tapBlock()\">\n        <span class=\"vp-title o-t\">Компания</span>\n        <span class=\"pp office-body\">{{order.company}}</span>\n        <ion-card id=\"company-card\">\n          <ion-item class=\"ion-activated\" *ngIf=\"order.Cname\">\n            <ion-label>\n              <h3>Ответственное лицо</h3>\n              {{order.Cname}}\n            </ion-label>\n          </ion-item>\n          <ion-item class=\"ion-activated\" *ngIf=\"order.Cadress\">\n            <ion-label>\n              <h3>Адрес</h3>\n              {{order.Cadress}}\n            </ion-label>\n          </ion-item>\n          <ion-item class=\"ion-activated\" *ngIf=\"order.Cphone\">\n            <ion-label>\n              <h3>Основной телефон</h3>\n              {{order.Cphone}}\n            </ion-label>\n          </ion-item>\n          <ion-item class=\"ion-activated\" *ngIf=\"order.Cphone_s\">\n            <ion-label>\n              <h3>Дополнительный телефон</h3>\n              {{order.Cphone_s}}\n            </ion-label>\n          </ion-item>\n        </ion-card>\n      </div>\n      <div class=\"o-row poruch-row podrazd\" *ngIf=\"podrazd\">\n        <span class=\"vp-title o-t\">Отдел</span>\n        <span class=\"pp office-body\">{{podrazd}}</span>\n      </div>\n      <div class=\"sum-row o-row\">\n        <div class=\"sum-title o-t\">Сумма с клиента:</div>\n        <div class=\"sum-body\">{{order.rur}}р.</div>\n      </div>\n      <div class=\"contacts-row o-row\">\n        <div class=\"cr-title o-t\">Контакты клиента:</div>\n        <div class=\"cr-row\">\n          <div class=\"cr-name-title\" *ngIf=\"order.client_fio\"><b>Имя</b></div>\n          <div class=\"cr-name\">{{order.client_fio}}</div>\n          <div class=\"cr-name-title\" *ngIf=\"order.client_name\"><b>Компания</b></div>\n          <div class=\"cr-name\">{{order.client_name}}</div>\n        </div>\n        <div class=\"cr-row\">\n          <div class=\"cr-phone-title\">Телефон</div>\n          <div class=\"cr-phone\" (click)=\"phoneClick('init')\">\n            Позвонить клиенту\n            <i-feather name=\"phone-call\"></i-feather>\n          </div>\n        </div>\n      </div>\n      <div class=\"time-row o-row\">\n        <div class=\"tr-title o-t\">Время доставки:</div>\n        <div class=\"tr-row\">\n          <div class=\"tr-from-title\">После</div>\n          <div class=\"cr-from\">{{timeFrom}}</div>\n        </div>\n        <div class=\"tr-row\">\n          <div class=\"tr-to-title\">До</div>\n          <div class=\"tr-to\">{{timeTo}}</div>\n        </div>\n      </div>\n      <div class=\"o-row amount-row\">\n        <span class=\"a-title o-t\">Количество / Вес</span>\n        <p class=\"ap sum-body\">{{amount}}шт. / {{mass}}кг.</p>\n      </div>\n      <div class=\"o-row vlog-row\">\n        <span class=\"vp-title o-t\">Комментарий к вложению</span>\n        <p class=\"vp message-body\">{{vlog}}</p>\n      </div>\n      <div class=\"o-row poruch-row\">\n        <span class=\"vp-title o-t\">Комментарий к заказу</span>\n        <p class=\"pp message-body\">{{poruch}}</p>\n      </div>\n      <div class=\"state-row o-row\">\n        <div class=\"state-title o-t\">\n          <img src=\"../../../assets/bender.png\" class=\"robot-icon\" alt=\"Робот\" /> <span class=\"st-status-text\">Робот\n            прозвон:</span>\n        </div>\n        <div class=\"st_state\" [ngClass]=\"{  'status_done' : client_status_id == 1,\n                                                'status_wait' : client_status_id == 2,\n                                                'status_fail' : client_status_id == 3,\n                                                'status_none' : client_status_id == 8,\n                                                'cl-status-voice' : client_status_id == 4 }\">\n          {{client_status}}\n        </div>\n        <div class=\"st_dt\">{{client_status_dt}}</div>\n        <button class=\"sc-submit voice-comment\" *ngIf=\"client_status_id == 4\" (click)=\"voiceLink()\">Прослушать</button>\n      </div>\n      <div class=\"sc-goods-block\" *ngIf=\"order.status_id == 6\">\n        <div class=\"goods-row o-row\">\n          <div class=\"gr-title o-t\">Товары в заказе</div>\n\n          <div class=\"gr-goods-list\">\n            <div class=\"gr-head\">\n              <div class=\"gr-col\">Название</div>\n              <div class=\"gr-col\">Кол-во</div>\n              <div class=\"gr-col\">Цена</div>\n            </div>\n            <div *ngFor=\"let good of goods\">\n              <div class=\"gr-item\" [ngClass]=\"{\n                  'st_fail': (g_quants[good.Code]['amount'] == 0),\n                  'st_done': (order.status_id == 6 && g_quants[good.Code]['amount'] > 0 )\n                }\">\n                <div class=\"gr-col gr-name\">{{good.Name}}</div>\n                <div class=\"gr-col gr-quant\">\n                  {{g_quants[good.Code]['amount']}}\n                </div>\n                <div class=\"gr-col gr-price\">{{good.Price}}р.</div>\n              </div>\n            </div>\n            <div><b>Итого: </b>{{order.rur}}р.</div>\n          </div>\n        </div>\n      </div>\n      <!-- Кнопки завершения заказа -->\n      <div class=\"sc-row o-row\" *ngIf=\"!(hide_status || status_id == 5 || status_id == 6)\">\n        <div class=\"sc-statuses\">\n          <div class=\"sc-status\" [ngClass]=\"{'status_active' : selectedStatus == status.id}\"\n            *ngFor=\"let status of statuses\" (click)=\"selectStatus(status.id)\">\n            {{status.status}}\n          </div>\n        </div>\n        <div class=\"sc-goods-block\" *ngIf=\"selectedStatus == 6 ||order.status_id == 6\">\n          <div class=\"goods-row o-row\">\n            <div class=\"gr-title o-t\">Товары в заказе</div>\n\n            <div class=\"gr-goods-list\">\n              <div class=\"gr-head\">\n                <div class=\"gr-col\">Название</div>\n                <div class=\"gr-col\">Кол-во</div>\n                <div class=\"gr-col\">Цена</div>\n              </div>\n              <div *ngFor=\"let good of goods\">\n                <div class=\"gr-item\" [ngClass]=\"{\n                  'st_fail': (g_quants[good.Code]['amount'] == 0),\n                  'st_done': (order.status_id == 6 && g_quants[good.Code]['amount'] > 0 )\n                }\">\n                  <div class=\"gr-col gr-name\">{{good.Name}}</div>\n                  <div class=\"gr-col gr-quant\">\n                    <div class=\"m-btn\" (click)=\"changeQuant(good.Code,'minus')\">\n                      <i-feather name=\"minus-circle\"></i-feather>\n                    </div>\n                    {{g_quants[good.Code]['amount']}}\n                    <div class=\"p-btn\" (click)=\"changeQuant(good.Code,'plus')\">\n                      <i-feather name=\"plus-circle\"></i-feather>\n                    </div>\n                  </div>\n                  <div class=\"gr-col gr-price\">{{good.Price}}р.</div>\n                </div>\n              </div>\n              <div><b>Итого: </b>{{order.rur}}р.</div>\n            </div>\n          </div>\n        </div>\n        <ion-button (click)=\"scanReturned()\" expand=\"block\" fill=\"solid\" shape=\"round\"\n          *ngIf=\"selectedStatus == 6 ||order.status_id == 6\">\n          Сканировать возврат\n        </ion-button>\n        <div class=\"sc-reasons\">\n          <div class=\"sc-resons-block\" *ngIf=\"selectedStatus == 4 \">\n            <div class=\"sc-r-title\">Причина:</div>\n            <div class=\"sc-reason\" [ngClass]=\"{'status_active' : selectedReason == reason.id}\"\n              *ngFor=\"let reason of reasons\" (click)=\"selectReason(reason.id)\">\n              {{reason.reason}}\n            </div>\n          </div>\n\n          <!-- Блок подписи -->\n          <div class=\"draw\" *ngIf=\"selectedStatus == 5 || selectedStatus == 6\">\n            <div class=\"asc-row\">\n              <div class=\"title\">Требуется ли подпись клиента?</div>\n              <div class=\"draw-btns\">\n                <button class=\"drawBtn\" [ngClass]=\"{'draw_btn_active'   : drawNeedle}\" (click)=\"drawBtn(true)\">\n                  Да\n                </button>\n                <button class=\"drawBtn\" [ngClass]=\"{'draw_btn_active'   : !drawNeedle}\" (click)=\"drawBtn(false)\">\n                  Нет\n                </button>\n              </div>\n            </div>\n            <img [src]=\"imageToShow\" alt=\"Подпись\" *ngIf=\"imageToShow && drawNeedle\" style=\"height: 200px;\" />\n            <button *ngIf=\"drawNeedle\" class=\"drawBtn changeDraw\" (click)=\"drawBtn(true)\">Изменить подпись</button>\n          </div>\n          <div class=\"sc-payment\" *ngIf=\"selectedStatus == 5 || selectedStatus == 6\">\n            <div class=\"sc-payment__title\">Оплата</div>\n            <div class=\"dc-payment__wrp\">\n              <div class=\"sc-payment-item\" [ngClass]=\"{'payment_active' : selectedPayment == 1}\"\n                (click)=\"selectPayment('1')\">\n                Наличными\n              </div>\n              <div class=\"sc-payment-item\" [ngClass]=\"{'payment_active' : selectedPayment == 2}\"\n                (click)=\"selectPayment('2')\">\n                Картой\n              </div>\n            </div>\n          </div>\n\n          <div class=\"sc-payment-block o-row\" *ngIf=\"pay_access && (selectedStatus == 5 || selectedStatus == 6)  \">\n            <div class=\"pb-email\" *ngIf=\"show_email\">\n              <div class=\"pb-email__title\">Email клиента</div>\n              <input type=\"email\" class=\"pb-email__input\" [(ngModel)]=\"email_input\" (input)=\"emailChange()\" />\n              <span class=\"email-error\" *ngIf=\"email_error\">Заполните поле</span>\n            </div>\n            <div class=\"pb-phone\">\n              <div class=\"pb-phone__title\" *ngIf=\"showPhone\">Телефон клиента</div>\n              <input *ngIf=\"showPhone\" type=\"tel\" class=\"pb-phone__input\" [(ngModel)]=\"phone_input\" />\n            </div>\n            <button class=\"show-phone\" (click)=\"enterPhone()\">Прочее</button>\n          </div>\n          <details *ngIf=\"selectedStatus && selectedStatus !== 6\">\n            <summary>Дополнительно</summary>\n\n            <div class=\"sc-comment-block\" *ngIf=\"selectedStatus == 5 || selectedStatus == 4\">\n              <div class=\"sc-r-title\">Комментарий:</div>\n              <textarea [(ngModel)]=\"commentText\" cols=\"30\" rows=\"3\" class=\"sc-comment\"></textarea>\n            </div>\n\n            <div class=\"goods-row o-row\" *ngIf=\"selectedStatus == 5\">\n              <div class=\"gr-title o-t\">Товары в заказе</div>\n\n              <div class=\"gr-goods-list\">\n                <div class=\"gr-head\">\n                  <div class=\"gr-col\">Название</div>\n                  <div class=\"gr-col\">Кол-во</div>\n                  <div class=\"gr-col\">Цена</div>\n                </div>\n                <div *ngFor=\"let good of goods\">\n                  <div class=\"gr-item\" [ngClass]=\"{'st_fail': good.kol_vo == 0}\">\n                    <div class=\"gr-col gr-name\">{{good.Name}}</div>\n                    <div class=\"gr-col gr-quant\">\n                      {{good.kol_vo}}\n                    </div>\n                    <div class=\"gr-col gr-price\">{{good.Price}}р.</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </details>\n          <div class=\"dt-picker\" *ngIf=\"selectedReason == 8\">\n            <ion-item>\n              <ion-label position=\"floating\">MM/DD/YYYY</ion-label>\n              <ion-datetime displayFormat=\"DD/MM/YYYY\" min=\"{{today.toISOString()}}\" value=\"{{tomorrow.toISOString()}}\"\n                [(ngModel)]='new_plan_date'></ion-datetime>\n            </ion-item>\n          </div>\n\n          <div class=\"sc-s-wrp\">\n            <button class=\"sc-submit\" (click)=\"doneOrder()\" *ngIf=\"selectedStatus\" [ngClass]=\"{'c_t_del'   : selectedStatus == 5 || selectedStatus == 6,\n                                    'c_t_u_del'  : selectedStatus == 4}\">\n              <span *ngIf=\"selectedStatus == 5 || selectedStatus == 6\" class=\"l_btn_del\">Доставлено</span>\n              <span *ngIf=\"selectedStatus == 4\" class=\"l_btn_u_del\">Завершить заказ</span>\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"code-loader\" *ngIf=\"hide_status && !barcode_flag\">\n        <div class=\"sh-icons\">\n          <ion-spinner name=\"circles\"></ion-spinner>\n        </div>\n        <div class=\"await-check\">\n          <h2>Заказ завершен,</h2>\n          идет ожидание чека, Вы можете вернуться к заказу позже из списка заказов, если показывать чек не нужно прямо\n          сейчас\n        </div>\n      </div>\n      <div class=\"sc-s-wrp\" *ngIf=\"barcode_flag\">\n        <qrcode class=\"qr\" [qrdata]=\"barcode\" [size]=\"256\" [level]=\"'M'\"></qrcode>\n        <button class=\"sc-submit show-check\" *ngIf=\"barcode_flag\" (click)=\"showCheck()\">Показать чек</button>\n      </div>\n      <div class=\"sc-s-wrp\">\n        <button class=\"sc-submit show-check to-list\" (click)=\"navBack()\">\n          К списку заказов\n        </button>\n        <ion-button (click)=\"intentStart()\" *ngIf=\"coords\">\n          Открыть в навигаторе\n        </ion-button>\n        <ion-button (click)=\"onMap()\" *ngIf=\"coords\">\n          Показать на карте\n        </ion-button>\n        <ion-item>\n          <ion-textarea placeholder=\"Ваша заметка о заказе\" [(ngModel)]=\"note\"></ion-textarea>\n        </ion-item>\n        <ion-button (click)=\"saveNote()\">\n          <i-feather name=\"save\"></i-feather>\n        </ion-button>\n      </div>\n    </div>\n  </div>\n  <div class=\"call-window\" *ngIf=\"callWindow\">\n    <div class=\"cw-body\">\n      <i-feather name=\"x-square\" (click)=\"phoneClick('init')\" size=\"large\"></i-feather>\n      <ion-list *ngIf=\"orderPhones.length > 1\">\n        <ion-radio-group name=\"selectedPhone\" [(ngModel)]=\"selectedPhone\">\n          <ion-list-header>\n            <ion-label>Выберите номер</ion-label>\n          </ion-list-header>\n          <ion-item *ngFor=\"let phone of orderPhones\">\n            <ion-radio value=\"{{phone}}\"></ion-radio>\n            <ion-label>{{phone}}</ion-label>\n          </ion-item>\n        </ion-radio-group>\n      </ion-list>\n      <button class=\"cw_phone\" (click)=\"phoneClick('phone')\"\n        *ngIf=\"settings.rules.phoneMode == 'robotPhone' || settings.rules.phoneMode == 'phone' \">\n        Позвонить со своего телефона\n      </button>\n      <button class=\"cw_operator\" (click)=\"phoneClick('operator')\"\n        *ngIf=\"settings.rules.phoneMode == 'robotPhone' || settings.rules.phoneMode == 'robot' \">\n        Позвонить через ip-шлюз\n      </button>\n    </div>\n  </div>\n</ion-content>"]}