(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"1CbX":function(t,e,n){"use strict";n.r(e),n.d(e,"DrawPageModule",(function(){return u}));var o=n("SVse"),i=n("s7LF"),r=n("iInd"),s=n("sZkV"),c=n("8Y7J");const a=["myCanvas"];function l(t,e){1&t&&(c.Lb(0,"div",7),c.rc(1,"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u044c"),c.Kb())}function h(t,e,n,o){const[i,r]=function(t){if(":"===t[0]){const e=t.match(/^:([^:]+):(.+)$/);return[e[1],e[2]]}return["",t]}(n);null!=o?t.setAttribute(e,r,o,i):t.removeAttribute(e,r,i)}const b=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.platform=t,this.router=e,this.renderer=n,this.location=o,this.isClear=!0,this.error_mes=!1,this.currentColour="#000000",this.brushSize=10,this.save_process=!1}ngOnInit(){}ngAfterViewInit(){this.canvasElement=this.canvas.nativeElement,h(this.renderer,this.canvasElement,"width",this.platform.width()+""),h(this.renderer,this.canvasElement,"height",this.platform.height()+"")}handleStart(t){this.lastX=t.touches[0].pageX,this.lastY=t.touches[0].pageY}clearCanvas(){this.isClear=!0,this.canvasElement.getContext("2d").clearRect(0,0,this.canvasElement.width,this.canvasElement.height)}handleMove(t){this.isClear=!1,this.error_mes=!1;let e=this.canvasElement.getContext("2d"),n=t.touches[0].pageX,o=t.touches[0].pageY;e.beginPath(),e.lineJoin="round",e.moveTo(this.lastX,this.lastY),e.lineTo(n,o),e.closePath(),e.strokeStyle=this.currentColour,e.lineWidth=this.brushSize,e.stroke(),this.lastX=n,this.lastY=o}saveImage(){if(this.isClear)return this.error_mes=!0,!1;console.log("save_image_call");var t=this.canvasElement.toDataURL();t=t.split(",")[1],localStorage.setItem("drawImg",t),this.back()}back(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(c.Ib(s.G),c.Ib(r.g),c.Ib(c.D),c.Ib(o.h))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-draw"]],viewQuery:function(t,e){var n;1&t&&c.oc(a,!0),2&t&&c.jc(n=c.Ub())&&(e.canvas=n.first)},decls:15,vars:1,consts:[[3,"touchstart","touchmove"],["myCanvas",""],["class","error",4,"ngIf"],[1,"btns"],[1,"save-btn",3,"click"],[1,"save-btn","clear-btn",3,"click"],[1,"save-btn","back",3,"click"],[1,"error"]],template:function(t,e){1&t&&(c.Lb(0,"ion-header"),c.Lb(1,"ion-toolbar"),c.Lb(2,"ion-title"),c.rc(3,"\u041f\u043e\u0434\u043f\u0438\u0441\u044c"),c.Kb(),c.Kb(),c.Kb(),c.Lb(4,"ion-content"),c.Lb(5,"canvas",0,1),c.Tb("touchstart",(function(t){return e.handleStart(t)}))("touchmove",(function(t){return e.handleMove(t)})),c.Kb(),c.qc(7,l,2,0,"div",2),c.Lb(8,"div",3),c.Lb(9,"button",4),c.Tb("click",(function(){return e.saveImage()})),c.rc(10,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),c.Kb(),c.Lb(11,"button",5),c.Tb("click",(function(){return e.clearCanvas()})),c.rc(12,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),c.Kb(),c.Lb(13,"button",6),c.Tb("click",(function(){return e.back()})),c.rc(14,"\u041d\u0430\u0437\u0430\u0434"),c.Kb(),c.Kb(),c.Kb()),2&t&&(c.yb(7),c.cc("ngIf",e.error_mes))},directives:[s.j,s.C,s.B,s.h,o.l],styles:["canvas[_ngcontent-%COMP%]{display:block;border:1px solid #bbb2b2;height:75%;width:100%}#wrp[_ngcontent-%COMP%]{height:100%;overflow:hidden}.btns[_ngcontent-%COMP%]{position:absolute;margin:0 auto;bottom:10px;left:0;right:0;height:100px;display:flex;justify-content:center;align-items:center;z-index:9999999}.save-btn[_ngcontent-%COMP%]{height:50px;width:300px;background:#474fc8;color:#fff;width:30%;margin:0 4px}.clear-btn[_ngcontent-%COMP%], .save-btn[_ngcontent-%COMP%]{outline:none}.mi-table[_ngcontent-%COMP%]{display:grid;grid-template-rows:40px auto;border:1px solid #e4e4e4}.m-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 180px 180px 120px 100px 100px 100px 100px 150px 150px;min-height:40px}.m-col[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.scroll-row[_ngcontent-%COMP%]{box-shadow:-2px 0 .5px .5px #e4e4e4}.m-row-h[_ngcontent-%COMP%]{border-bottom:1px solid #e4e4e4}.m-col[_ngcontent-%COMP%]{border-left:1px solid #e4e4e4}.m-col[_ngcontent-%COMP%]:first-child{border-left:none}.ion-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.error[_ngcontent-%COMP%]{color:red;width:100%;text-align:center}"]}),t})()}];let u=(()=>{class t{}return t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({factory:function(e){return new(e||t)},imports:[[o.c,i.b,s.D,r.i.forChild(b)]]}),t})()}}]);