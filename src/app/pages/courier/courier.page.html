<ion-content>
        <span class="cn" *ngIf="state$.notificationStr && state$.notificationStr != ''">{{state$.notificationStr}}</span>
        <span class="manual_lable" [ngClass]="{  'm_lbl' : auth.getMode() == 'manual' || auth.getMode() == 'manual_wo'}" *ngIf="state$.manual_route && selectedTab == 1">Для сортировки зажмите заказ и перетащите</span>
        <span class="find-order-btn" (click)="findOrder()">
            <i class="fas fa-search"></i>
        </span>
        <span class="submit-order-btn" *ngIf="subBtnCond" (click)="submitOrder()">
            <i class="fas fa-box-open"></i>
        </span>
<div class="c-wrp" [ngClass]="{  'm_wrp' : auth.getMode() == 'manual' || auth.getMode() == 'manual_wo'}" >
    <div class="c-title">
        <span class="ct">Мои заказы</span>
    </div>
    <div class="o-tab-wrp" *ngIf="ordersInit">
            <div class="o-tab" [ngClass] = "{'tab_active' : selectedTab == 1}" (click)="tabSelect(1)">В работе</div>
            <div class="o-tab" [ngClass] = "{'tab_active' : selectedTab == 2}"(click)="tabSelect(2)">Доставлено</div>
            <div class="o-tab" [ngClass] = "{'tab_active' : selectedTab == 3}"(click)="tabSelect(3)">Не доставлено</div>
    </div>
    <div class="c-body" *ngIf="ordersInit">
        <app-orders-list-first  
                                [selectedTab]="selectedTab"
                                [confirm_cond]="subBtnCond"
                                *ngIf="selectedTab == 1 && this.state$.manual_route"
                                (ordersChange_E)="ordersListChanged($event)"
                                (orderSelected_E)="selectOrder($event)">
        </app-orders-list-first>
        <app-orders-list-second
                                [orders_c]="orders"
                                [selectedTab]="selectedTab"
                                [confirm_cond]="subBtnCond"
                                *ngIf="!(this.state$.manual_route && selectedTab == 1) "
                                (orderSelected_E)="selectOrder($event)">
        </app-orders-list-second>
      <!-- <div class="order-list" *ngIf="!(this.state$.manual_route && selectedTab == 1)">
        <cdk-virtual-scroll-viewport itemSize="50" style="height:100%; width: 100%" >  
            <div   *ngFor="let order of orders | oTTabPipe : selectedTab; trackBy:customTrackBy" 
                            class="ol-item" 
                            [ngClass]= "{'shopTake' : order.SMACode != NULL}" 
                            (click) = "selectOrder(order.id)" >
                <div class="ol-col oc-left">
                <div class="oc-left-row c_number"><span class="show-t" *ngIf="order.SMACode != NULL">Забор &nbsp;</span>{{order.client_id}} <span class="order-company" *ngIf="order.company">({{order.company}})</span>      </div>
                    <div class="oc-left-row c_address">{{order.client_address}}</div>
                </div>
                <div class="ol-col oc-right">
                    <div *ngIf="order.status_id == 1" class="c-status" [ngClass]="{  'status_done' : order.client_status_id == 1,
                                                        'status_wait' : order.client_status_id == 2,
                                                        'status_fail' : order.client_status_id == 3,
                                                        'status_none' : order.client_status_id == 8,
                                                        'cl-status-voice' : order.client_status_id == 4 }">{{order.client_status}}</div>
                    <div class="done-time" *ngIf="order.status_id != 1">
                        <div class="done-title">Время</div> 
                        <div class="done-body">{{order.date}}</div> 
                    </div>
                </div>
            </div>
        </cdk-virtual-scroll-viewport>
        </div> -->
        <div class="orders-lable">
            <div class="all-amount olab-amount">Всего заказов: <span class="amount-labl">{{orders.length}}</span></div>
            <div class="olab-amount" *ngIf="selectedTab == 1 && g_process != 0">Заказов на вкладке: <span class="amount-labl">{{g_process}}</span></div>
            <div class="olab-amount" *ngIf="selectedTab == 2 && g_done != 0">Заказов на вкладке: <div class="amount-labl">{{g_done}}</div></div>
            <div class="olab-amount" *ngIf="selectedTab == 3 && g_fail != 0">Заказов на вкладке: <div class="amount-labl">{{g_fail}}</div></div>
            <div class="olab-empty" *ngIf=" (selectedTab == 1 && g_process == 0) ||
                                            (selectedTab == 2 && g_done == 0) ||
                                            (selectedTab == 3 && g_fail == 0)"><span class="center-title">Нет заказов</span></div>
        </div>  
    </div>
    <div class="start-route" *ngIf="ordersInit && state$.orders_data.length != 0">
        <button class="satrt-r-btn" *ngIf = "!btn_go && !this.state$.manual_route" (click) ="startRoute()">Начать маршрут</button>  
        <button class="satrt-r-btn sr-stop" *ngIf = "btn_go && !this.state$.manual_route"  (click) ="stopRoute()">Остановить маршрут</button>  
        <!-- <button class="satrt-r-btn find-o-btn" (click)="findOrder()" >Найти заказ</button> -->
        <button class="satrt-r-btn find-o-btn" *ngIf="auth.getMode() == 'auto' || auth.getMode() == 'auto_wo'" [ngClass]="{  'manual_btn' : this.state$.manual_route}" (click)="manualRoute()" >
           <span *ngIf="this.state$.manual_route">Автоматический режим</span>
           <span *ngIf="!this.state$.manual_route">Ручной режим</span>
        </button>
    </div>
    <div class="scanWindow" *ngIf="scanView">
        <div class="sw-wrp">
          <div class="sw-title">Просканируйте штрихкод</div>
          <input #sInput class="ionInp" (change)="scanInputChange()"  [(ngModel)]="scanInput" autofocus>
        </div>
      </div>
    
    <div class="c-bottom"></div>
</div>

<div class="shirm" *ngIf="loader">
    <i class="fas fa-spinner fa-spin"></i>
</div>
</ion-content>
